<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>DeepWeb.Lib.SimpleSpec_ServerTrace</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library DeepWeb.Lib.SimpleSpec_ServerTrace</h1>

<div class="code">
<span class="id" title="keyword">Type</span><span class="id" title="var">classes</span> <span class="id" title="tactic">eauto</span> := 6.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">QuickChick</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">QuickChick</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">ExtLib</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">Monad</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.Ascii.html#"><span class="id" title="library">Ascii</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.PArith.PArith.html#"><span class="id" title="library">PArith</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Vectors.Fin.html#"><span class="id" title="library">Fin</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#"><span class="id" title="library">DeepWeb.Free.Monad.Free</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#"><span class="id" title="library">DeepWeb.Free.Monad.Common</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">SumNotations</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">NonDeterminismBis</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#"><span class="id" title="library">DeepWeb.Free.Monad.Spec</span></a>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">DeepWeb</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.Util.html#"><span class="id" title="library">Lib.Util</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#"><span class="id" title="library">Lib.SimpleSpec_NetworkInterface</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#"><span class="id" title="library">Lib.SimpleSpec_Observer</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_Descramble.html#"><span class="id" title="library">Lib.SimpleSpec_Descramble</span></a>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="Monad_G"><span class="id" title="instance">Monad_G</span></a> : <a class="idref" href="Custom.Monad.html#Monad"><span class="id" title="class">Monad</span></a> <span class="id" title="axiom">G</span> :=<br/>
&nbsp;&nbsp;{ <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <span class="id" title="var">_</span> := <span class="id" title="axiom">returnGen</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#bind"><span class="id" title="method">bind</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> := <span class="id" title="axiom">bindGen</span>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="shuffle"><span class="id" title="definition">shuffle</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="axiom">G</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">length</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fix</span> <span class="id" title="var">shuf</span> <span class="id" title="var">n</span> <span class="id" title="var">xs</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#n"><span class="id" title="variable">n</span></a>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>, <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs'</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">zys</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="axiom">elements</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.picks"><span class="id" title="definition">picks</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a>)<a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">ys</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#zys"><span class="id" title="variable">zys</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">zs</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#shuf"><span class="id" title="variable">shuf</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="var">ys</span><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#zs"><span class="id" title="variable">zs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> â‡’ <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Here&nbsp;we&nbsp;traverse&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">server'</span></span>&nbsp;tree&nbsp;to&nbsp;generate&nbsp;its&nbsp;traces.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;use&nbsp;the&nbsp;following&nbsp;effect&nbsp;to&nbsp;annotate&nbsp;a&nbsp;tree&nbsp;with&nbsp;traces.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;TODO:&nbsp;put&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">Free</span></span>?&nbsp;*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a name="note_traceE"><span class="id" title="inductive">note_traceE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="NoteTrace"><span class="id" title="constructor">NoteTrace</span></a> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#trace"><span class="id" title="definition">trace</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#note_traceE"><span class="id" title="inductive">note_traceE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;keep&nbsp;track&nbsp;of&nbsp;a&nbsp;counter&nbsp;to&nbsp;generate&nbsp;fresh&nbsp;connection&nbsp;IDs.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="network_state"><span class="id" title="definition">network_state</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="new_connection"><span class="id" title="definition">new_connection</span></a> (<span class="id" title="var">st</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#network_state"><span class="id" title="definition">network_state</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#network_state"><span class="id" title="definition">network_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">Ã—</span></a> <a class="idref" href="DeepWeb.Lib.Util.html#connection_id"><span class="id" title="inductive">connection_id</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="DeepWeb.Lib.Util.html#Connection"><span class="id" title="constructor">Connection</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="traceE"><span class="id" title="definition">traceE</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.nondetE"><span class="id" title="inductive">nondetE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#note_traceE"><span class="id" title="inductive">note_traceE</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Type&nbsp;of&nbsp;trees&nbsp;annotated&nbsp;with&nbsp;traces.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="itree_traces"><span class="id" title="definition">itree_traces</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#traceE"><span class="id" title="definition">traceE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;traverse&nbsp;the&nbsp;tree,&nbsp;accumulating&nbsp;a&nbsp;trace&nbsp;and&nbsp;outputing<br/>
&nbsp;&nbsp;&nbsp;it&nbsp;every&nbsp;time&nbsp;a&nbsp;new&nbsp;event&nbsp;gets&nbsp;added.&nbsp;The&nbsp;traces&nbsp;that&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;output&nbsp;tree&nbsp;is&nbsp;annotated&nbsp;with&nbsp;are&nbsp;exactly&nbsp;the&nbsp;set&nbsp;of&nbsp;traces<br/>
&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;original&nbsp;tree.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Main&nbsp;body&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">enum_traces_handler</span></span>.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="enum_traces_handler"><span class="id" title="definition">enum_traces_handler</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">âˆ€</span> <span class="id" title="var">X</span>, <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#network_state"><span class="id" title="definition">network_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">Ã—</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#trace"><span class="id" title="definition">trace</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#serverE"><span class="id" title="definition">serverE</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#traceE"><span class="id" title="definition">traceE</span></a> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">Ã—</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">X</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">st</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">cur_trace</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="var">e</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <span class="id" title="var">e</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_event</span> <span class="id" title="var">e</span> <span class="id" title="var">x</span> <span class="id" title="var">st</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cur_trace</span> := (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cur_trace"><span class="id" title="variable">cur_trace</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Common.html#64d5f9e2f8c38e5723679d90678494f4"><span class="id" title="notation">^</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#NoteTrace"><span class="id" title="constructor">NoteTrace</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cur_trace"><span class="id" title="variable">cur_trace</span></a>) <a class="idref" href="Custom.Monad.html#617d4c2635d7166c8606c5fbf0f2733e"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">((</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cur_trace"><span class="id" title="variable">cur_trace</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#e"><span class="id" title="variable">e</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#networkE"><span class="id" title="inductive">networkE</span></a> <span class="id" title="var">X'</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X'"><span class="id" title="variable">X'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#Accept"><span class="id" title="constructor">Accept</span></a> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">st</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> := <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#new_connection"><span class="id" title="definition">new_connection</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#new_event"><span class="id" title="variable">new_event</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#Event"><span class="id" title="constructor">Event</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#ObsConnect"><span class="id" title="constructor">ObsConnect</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <span class="id" title="var">c</span>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#RecvByte"><span class="id" title="constructor">RecvByte</span></a> <span class="id" title="var">c</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arb"><span class="id" title="definition">arb</span></a><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#new_event"><span class="id" title="variable">new_event</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#Event"><span class="id" title="constructor">Event</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#ObsToServer"><span class="id" title="constructor">ObsToServer</span></a> <span class="id" title="var">c</span>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#b"><span class="id" title="variable">b</span></a>) (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#b"><span class="id" title="variable">b</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#SendByte"><span class="id" title="constructor">SendByte</span></a> <span class="id" title="var">c</span> <span class="id" title="var">b</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;mutate&nbsp;this&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new_event&nbsp;(Event&nbsp;(ObsFromServer&nbsp;c)&nbsp;(Some&nbsp;"c"*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#new_event"><span class="id" title="variable">new_event</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#Event"><span class="id" title="constructor">Event</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#ObsFromServer"><span class="id" title="constructor">ObsFromServer</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span>)) (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#bc6eb885c46b11f88927f8f92a59fd37"><span class="id" title="notation">(</span></a> <span class="id" title="var">_Or</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#bc6eb885c46b11f88927f8f92a59fd37"><span class="id" title="notation">|)</span></a> â‡’ <span class="id" title="var">x</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#embed"><span class="id" title="method">embed</span></a> <span class="id" title="var">_Or</span><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a> <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">((</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#st"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cur_trace"><span class="id" title="variable">cur_trace</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="enum_traces"><span class="id" title="definition">enum_traces</span></a> (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#itree_server"><span class="id" title="definition">itree_server</span></a>) : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#itree_traces"><span class="id" title="definition">itree_traces</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#mapM"><span class="id" title="definition">mapM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#hom_state"><span class="id" title="definition">hom_state</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#enum_traces_handler"><span class="id" title="definition">enum_traces_handler</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#t"><span class="id" title="variable">t</span></a>).<br/>

<br/>
<span class="comment">(**)</span><br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;small&nbsp;backtracking&nbsp;generator&nbsp;library.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;There&nbsp;are&nbsp;a&nbsp;lot&nbsp;of&nbsp;dead&nbsp;ends&nbsp;in&nbsp;the&nbsp;above&nbsp;tree.<br/>
&nbsp;&nbsp;&nbsp;We&nbsp;use&nbsp;backtracking&nbsp;to&nbsp;increase&nbsp;our&nbsp;chances&nbsp;of&nbsp;reaching<br/>
&nbsp;&nbsp;&nbsp;more&nbsp;interesting&nbsp;traces.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Backtracking&nbsp;generator.&nbsp;We&nbsp;use&nbsp;fuel&nbsp;to&nbsp;control&nbsp;the&nbsp;execution<br/>
&nbsp;&nbsp;&nbsp;time&nbsp;predictably.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="G'"><span class="id" title="definition">G'</span></a> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="axiom">G</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="axiom">G</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="runG'"><span class="id" title="definition">runG'</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">g</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="axiom">G</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#g"><span class="id" title="variable">g</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> â‡’ <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Append&nbsp;two&nbsp;generators.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="orG'"><span class="id" title="definition">orG'</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">g1</span> <span class="id" title="var">g2</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#g1"><span class="id" title="variable">g1</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">fuel</span> â‡’ <span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> â‡’ <a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">fuel</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>

<br/>
<span class="comment">(*&nbsp;Generate&nbsp;a&nbsp;constant&nbsp;element.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="retG'"><span class="id" title="definition">retG'</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">x</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">xs</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a>).<br/>

<br/>
<span class="comment">(*&nbsp;Empty&nbsp;generator.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="emptyG'"><span class="id" title="definition">emptyG'</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Run&nbsp;a&nbsp;parameterized&nbsp;generator&nbsp;<span class="inlinecode"><span class="id" title="var">f</span></span>&nbsp;with&nbsp;each&nbsp;element<br/>
&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;list&nbsp;<span class="inlinecode"><span class="id" title="var">xs</span></span>&nbsp;as&nbsp;an&nbsp;argument.&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="traverseG'"><span class="id" title="definition">traverseG'</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#B"><span class="id" title="variable">B</span></a>) : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#B"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#emptyG'"><span class="id" title="definition">emptyG'</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#orG'"><span class="id" title="definition">orG'</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#traverseG'"><span class="id" title="definition">traverseG'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#f"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(**)</span><br/>

<br/>
<span class="comment">(*&nbsp;Generate&nbsp;random&nbsp;traces&nbsp;up&nbsp;to&nbsp;a&nbsp;given&nbsp;depth&nbsp;in&nbsp;the&nbsp;tree.&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="random_trace'"><span class="id" title="definition">random_trace'</span></a> (<span class="id" title="var">max_depth</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#itree_traces"><span class="id" title="definition">itree_traces</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#trace"><span class="id" title="definition">trace</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#emptyG'"><span class="id" title="definition">emptyG'</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">max_depth</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">t</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#random_trace'"><span class="id" title="definition">random_trace'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#emptyG'"><span class="id" title="definition">emptyG'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <span class="id" title="var">e</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> <span class="id" title="var">k</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#note_traceE"><span class="id" title="inductive">note_traceE</span></a> <span class="id" title="var">X</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#NoteTrace"><span class="id" title="constructor">NoteTrace</span></a> <span class="id" title="var">tr</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#orG'"><span class="id" title="definition">orG'</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#retG'"><span class="id" title="definition">retG'</span></a> <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#random_trace'"><span class="id" title="definition">random_trace'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> (<span class="id" title="var">k</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">(|</span></a> <span class="id" title="var">_Arb</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">|)</span></a> <span class="id" title="var">k</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">_Arb</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <span class="id" title="var">X</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb"><span class="id" title="constructor">Arb</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="method">arbitrary</span><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#random_trace'"><span class="id" title="definition">random_trace'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> (<span class="id" title="var">k</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a>)) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#124ab5f1c708bfa3c235ed10a3b69441"><span class="id" title="notation">(</span></a> <span class="id" title="var">_Or</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#124ab5f1c708bfa3c235ed10a3b69441"><span class="id" title="notation">||)</span></a> <span class="id" title="var">k</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">_Or</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.nondetE"><span class="id" title="inductive">nondetE</span></a> <span class="id" title="var">X</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#G'"><span class="id" title="definition">G'</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.Or"><span class="id" title="constructor">Or</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">xs</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#shuffle"><span class="id" title="definition">shuffle</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.every_fin"><span class="id" title="definition">every_fin</span></a><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#traverseG'"><span class="id" title="definition">traverseG'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#random_trace'"><span class="id" title="definition">random_trace'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> (<span class="id" title="var">k</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a>))) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="random_trace"><span class="id" title="definition">random_trace</span></a> (<span class="id" title="var">max_depth</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#itree_server"><span class="id" title="definition">itree_server</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="axiom">G</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#trace"><span class="id" title="definition">trace</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#runG'"><span class="id" title="definition">runG'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#random_trace'"><span class="id" title="definition">random_trace'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#enum_traces"><span class="id" title="definition">enum_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#t"><span class="id" title="variable">t</span></a>)).<br/>

<br/>
<span class="comment">(**)</span><br/>

<br/>
<span class="comment">(*&nbsp;Plumbing&nbsp;to&nbsp;adapt&nbsp;the&nbsp;test&nbsp;function.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Failure&nbsp;carries&nbsp;counterexample.&nbsp;*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a name="test_result"><span class="id" title="inductive">test_result</span></a> <span class="id" title="var">cx</span> := <a name="OK"><span class="id" title="constructor">OK</span></a> | <a name="GIVEUP"><span class="id" title="constructor">GIVEUP</span></a> | <a name="FAIL"><span class="id" title="constructor">FAIL</span></a> (<span class="id" title="var">x</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cx"><span class="id" title="variable">cx</span></a>).<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#OK"><span class="id" title="constructor">OK</span></a> {<span class="id" title="var">cx</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#GIVEUP"><span class="id" title="constructor">GIVEUP</span></a> {<span class="id" title="var">cx</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#FAIL"><span class="id" title="constructor">FAIL</span></a> {<span class="id" title="var">cx</span>} <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Checker'"><span class="id" title="definition">Checker'</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="definition">Checker</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="definition">Checker</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="run_checker'"><span class="id" title="definition">run_checker'</span></a> (<span class="id" title="var">fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">c</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a>) : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#c"><span class="id" title="variable">c</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> â‡’ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="burn"><span class="id" title="definition">burn</span></a> (<span class="id" title="var">cont</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="definition">Checker</span>) (<span class="id" title="var">fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> â‡’ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">fuel</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="or_ck"><span class="id" title="definition">or_ck</span></a> (<span class="id" title="var">c1</span> <span class="id" title="var">c2</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a>) : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#c1"><span class="id" title="variable">c1</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#burn"><span class="id" title="definition">burn</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#c2"><span class="id" title="variable">c2</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="22fc8fbdc1c9190ae69b67b46c1b83fe"><span class="id" title="notation">&quot;</span></a>a ||? b" := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#or_ck"><span class="id" title="definition">or_ck</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a>))<br/>
(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ok"><span class="id" title="definition">ok</span></a> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">cont</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="traverse_qc"><span class="id" title="definition">traverse_qc</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ck</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a>) : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#ok"><span class="id" title="definition">ok</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#ck"><span class="id" title="variable">ck</span></a> <span class="id" title="var">x</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#22fc8fbdc1c9190ae69b67b46c1b83fe"><span class="id" title="notation">||?</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#traverse_qc"><span class="id" title="definition">traverse_qc</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#ck"><span class="id" title="variable">ck</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="forall_traces"><span class="id" title="definition">forall_traces</span></a> (<span class="id" title="var">max_depth</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">check_trace</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#trace"><span class="id" title="definition">trace</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_Descramble.html#result"><span class="id" title="inductive">result</span></a>) (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#itree_traces"><span class="id" title="definition">itree_traces</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#Checker'"><span class="id" title="definition">Checker'</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#ok"><span class="id" title="definition">ok</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">max_depth</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">t</span> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#forall_traces"><span class="id" title="definition">forall_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace"><span class="id" title="variable">check_trace</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#ok"><span class="id" title="definition">ok</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e</span> <span class="id" title="var">k</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">e</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <span class="id" title="var">_Note</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">_Note</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#note_traceE"><span class="id" title="inductive">note_traceE</span></a> <span class="id" title="var">X</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#NoteTrace"><span class="id" title="constructor">NoteTrace</span></a> <span class="id" title="var">tr</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace"><span class="id" title="variable">check_trace</span></a> <span class="id" title="var">tr</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Descramble.html#OutOfFuel"><span class="id" title="constructor">OutOfFuel</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#ok"><span class="id" title="definition">ok</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Descramble.html#Found"><span class="id" title="constructor">Found</span></a> â‡’ <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#forall_traces"><span class="id" title="definition">forall_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace"><span class="id" title="variable">check_trace</span></a> (<span class="id" title="var">k</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)) <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Lib.SimpleSpec_Descramble.html#NotFound"><span class="id" title="constructor">NotFound</span></a> â‡’ <span class="id" title="definition">whenFail'</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> â‡’ <span class="id" title="method">show</span> <span class="id" title="var">tr</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">(|</span></a> <span class="id" title="var">_Arb</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">|)</span></a> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">_Arb</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <span class="id" title="var">X</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb"><span class="id" title="constructor">Arb</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">checker</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="method">arbitrary</span><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#forall_traces"><span class="id" title="definition">forall_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace"><span class="id" title="variable">check_trace</span></a> (<span class="id" title="var">k</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#124ab5f1c708bfa3c235ed10a3b69441"><span class="id" title="notation">(</span></a> <span class="id" title="var">_Or</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#124ab5f1c708bfa3c235ed10a3b69441"><span class="id" title="notation">||)</span></a> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">_Or</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.nondetE"><span class="id" title="inductive">nondetE</span></a> <span class="id" title="var">X</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">â†’</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.Or"><span class="id" title="constructor">Or</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n</span> â‡’ <span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> <span class="id" title="var">cont</span> <span class="id" title="var">fuel</span> â‡’<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">check</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#forall_traces"><span class="id" title="definition">forall_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace"><span class="id" title="variable">check_trace</span></a> (<span class="id" title="var">k</span> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#x"><span class="id" title="variable">x</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">checker</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">xs</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#shuffle"><span class="id" title="definition">shuffle</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.every_fin"><span class="id" title="definition">every_fin</span></a><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.Monad.html#ret"><span class="id" title="method">ret</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#traverse_qc"><span class="id" title="definition">traverse_qc</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check"><span class="id" title="variable">check</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#cont"><span class="id" title="variable">cont</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#fuel"><span class="id" title="variable">fuel</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_trace_incl"><span class="id" title="definition">check_trace_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">max_depth</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">backtrack_fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">descramble_fuel</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">spec</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#itree_spec"><span class="id" title="definition">itree_spec</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">impl</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#itree_server"><span class="id" title="definition">itree_server</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">check_trace</span> := <a class="idref" href="DeepWeb.Lib.SimpleSpec_Descramble.html#is_scrambled_trace_of"><span class="id" title="definition">is_scrambled_trace_of</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#descramble_fuel"><span class="id" title="variable">descramble_fuel</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#spec"><span class="id" title="variable">spec</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#run_checker'"><span class="id" title="definition">run_checker'</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#backtrack_fuel"><span class="id" title="variable">backtrack_fuel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#forall_traces"><span class="id" title="definition">forall_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#max_depth"><span class="id" title="variable">max_depth</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace"><span class="id" title="variable">check_trace</span></a> (<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#enum_traces"><span class="id" title="definition">enum_traces</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#impl"><span class="id" title="variable">impl</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_trace_incl_def"><span class="id" title="definition">check_trace_incl_def</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">spec</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_Observer.html#itree_spec"><span class="id" title="definition">itree_spec</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">impl</span> : <a class="idref" href="DeepWeb.Lib.SimpleSpec_NetworkInterface.html#itree_server"><span class="id" title="definition">itree_server</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#check_trace_incl"><span class="id" title="definition">check_trace_incl</span></a> 100 100 1000 <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#spec"><span class="id" title="variable">spec</span></a> <a class="idref" href="DeepWeb.Lib.SimpleSpec_ServerTrace.html#impl"><span class="id" title="variable">impl</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>