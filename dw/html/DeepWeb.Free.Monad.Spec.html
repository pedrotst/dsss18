<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>DeepWeb.Free.Monad.Spec</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library DeepWeb.Free.Monad.Spec</h1>

<div class="code">
</div>

<div class="doc">
A generic specification monad, parametrized over the "co-events"
    corresponding to a "program under observation." 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Contextual</span> <span class="id" title="keyword">Implicit</span>.<br/>
<span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">All</span> <span class="id" title="keyword">Variables</span>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Equality</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">QuickChick</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">QuickChick</span>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Custom</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Custom.String.html#"><span class="id" title="library">String</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="DeepWeb.Free.Monad.Free.html#"><span class="id" title="library">DeepWeb.Free.Monad.Free</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#"><span class="id" title="library">DeepWeb.Free.Monad.Common</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotations</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">SumNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">sum_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Make&nbsp;CE&nbsp;a&nbsp;parameter&nbsp;of&nbsp;a&nbsp;Section&nbsp;for&nbsp;the&nbsp;rest.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Arbitrary"><span class="id" title="section">Arbitrary</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="Arb"><span class="id" title="constructor">Arb</span></a> : <span class="id" title="keyword">∀</span> `{<span class="id" title="class">Show</span> <span class="id" title="var">X</span>} `{<span class="id" title="class">Arbitrary</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>}, <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb"><span class="id" title="constructor">Arb</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="HasArbitrary"><span class="id" title="record">HasArbitrary</span></a> (<span class="id" title="var">E</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;{ <a name="Arb_"><span class="id" title="projection">Arb_</span></a> : <span class="id" title="keyword">∀</span> `{<span class="id" title="class">Show</span> <span class="id" title="var">X</span>} `{<span class="id" title="class">Arbitrary</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>}, <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a> }.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="default_HasArbitrary"><span class="id" title="instance">default_HasArbitrary</span></a> `{<a class="idref" href="DeepWeb.Free.Monad.Common.html#Convertible"><span class="id" title="class">Convertible</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <span class="id" title="var">E</span>}<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Spec.html#HasArbitrary"><span class="id" title="class">HasArbitrary</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> :=<br/>
&nbsp;&nbsp;{ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb_"><span class="id" title="method">Arb_</span></a> := <span class="id" title="keyword">fun</span> `{<span class="id" title="class">Show</span> <span class="id" title="var">X</span>} `{<span class="id" title="class">Arbitrary</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>} ⇒ <a class="idref" href="DeepWeb.Free.Monad.Common.html#convert"><span class="id" title="method">convert</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb"><span class="id" title="constructor">Arb</span></a> }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="arb"><span class="id" title="definition">arb</span></a> `{<a class="idref" href="DeepWeb.Free.Monad.Spec.html#HasArbitrary"><span class="id" title="class">HasArbitrary</span></a> <span class="id" title="var">E</span>} `{<span class="id" title="class">Show</span> <span class="id" title="var">X</span>} `{<span class="id" title="class">Arbitrary</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#liftE"><span class="id" title="definition">liftE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb_"><span class="id" title="method">Arb_</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="Show_arbitraryE"><span class="id" title="instance">Show_arbitraryE</span></a> <span class="id" title="var">X</span> : <span class="id" title="class">Show</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="method">show</span> <span class="id" title="var">e</span> := "Arb" }.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arbitrary"><span class="id" title="section">Arbitrary</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Alt"><span class="id" title="section">Alt</span></a>.<br/>
<span class="comment">(*&nbsp;A&nbsp;disjunction&nbsp;like&nbsp;<span class="inlinecode"><span class="id" title="var">Or</span></span>,&nbsp;but&nbsp;with&nbsp;a<br/>
&nbsp;&nbsp;&nbsp;different&nbsp;meaning&nbsp;in&nbsp;a&nbsp;specification:<br/>
&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">Or</span></span>:&nbsp;both&nbsp;branches&nbsp;must&nbsp;be&nbsp;valid,&nbsp;the&nbsp;choice&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;branch&nbsp;is&nbsp;determined&nbsp;by&nbsp;an&nbsp;external&nbsp;event<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(like&nbsp;"multiplicative&nbsp;disjunction"&nbsp;in&nbsp;linear&nbsp;logic?);<br/>
&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">Alt</span></span>:&nbsp;either&nbsp;branch&nbsp;can&nbsp;be&nbsp;valid,&nbsp;an&nbsp;implementation<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gets&nbsp;to&nbsp;choose&nbsp;("additive&nbsp;disjunction"?).<br/>
&nbsp;&nbsp;&nbsp;For&nbsp;testing,&nbsp;we&nbsp;have&nbsp;<span class="inlinecode"><span class="id" title="var">Or</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">conjoin</span></span>,&nbsp;<span class="inlinecode"><span class="id" title="var">Alt</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">disjoin</span></span>.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="altE"><span class="id" title="inductive">altE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="Alt"><span class="id" title="constructor">Alt</span></a> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#altE"><span class="id" title="inductive">altE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="HasAlt"><span class="id" title="record">HasAlt</span></a> (<span class="id" title="var">E</span> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;{ <a name="Alt_"><span class="id" title="projection">Alt_</span></a> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> }.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="default_HasAlt"><span class="id" title="instance">default_HasAlt</span></a> `{<a class="idref" href="DeepWeb.Free.Monad.Common.html#Convertible"><span class="id" title="class">Convertible</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#altE"><span class="id" title="inductive">altE</span></a> <span class="id" title="var">E</span>}<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Spec.html#HasAlt"><span class="id" title="class">HasAlt</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> :=<br/>
&nbsp;&nbsp;{ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt_"><span class="id" title="method">Alt_</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Common.html#convert"><span class="id" title="method">convert</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt"><span class="id" title="constructor">Alt</span></a> }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="alt"><span class="id" title="definition">alt</span></a> `{<a class="idref" href="DeepWeb.Free.Monad.Spec.html#HasAlt"><span class="id" title="class">HasAlt</span></a> <span class="id" title="var">E</span>} {<span class="id" title="var">X</span>} (<span class="id" title="var">m1</span> <span class="id" title="var">m2</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt_"><span class="id" title="method">Alt_</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#m1"><span class="id" title="variable">m1</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#m2"><span class="id" title="variable">m2</span></a>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="Show_altE"><span class="id" title="instance">Show_altE</span></a> <span class="id" title="var">X</span> : <span class="id" title="class">Show</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#altE"><span class="id" title="inductive">altE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="method">show</span> <span class="id" title="var">e</span> := "Alt" }.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt"><span class="id" title="section">Alt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Discard"><span class="id" title="section">Discard</span></a>.<br/>
<span class="comment">(*&nbsp;An&nbsp;alternative&nbsp;form&nbsp;of&nbsp;failure&nbsp;that&nbsp;discards&nbsp;a&nbsp;test<br/>
&nbsp;&nbsp;&nbsp;case&nbsp;instead&nbsp;of&nbsp;failing.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="discardE"><span class="id" title="inductive">discardE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="Discard"><span class="id" title="constructor">Discard</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#discardE"><span class="id" title="inductive">discardE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#void"><span class="id" title="inductive">void</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="discard"><span class="id" title="definition">discard</span></a> `{<a class="idref" href="DeepWeb.Free.Monad.Common.html#Convertible"><span class="id" title="class">Convertible</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#discardE"><span class="id" title="inductive">discardE</span></a> <span class="id" title="var">E</span>} {<span class="id" title="var">X</span>} (<span class="id" title="var">reason</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Common.html#convert"><span class="id" title="method">convert</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#Discard"><span class="id" title="constructor">Discard</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#reason"><span class="id" title="variable">reason</span></a>)) (<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#void"><span class="id" title="inductive">void</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span> <span class="id" title="keyword">end</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a name="Show_discardE"><span class="id" title="instance">Show_discardE</span></a> <span class="id" title="var">X</span> : <span class="id" title="class">Show</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#discardE"><span class="id" title="inductive">discardE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="method">show</span> := <span class="id" title="keyword">fun</span> '(<a class="idref" href="DeepWeb.Free.Monad.Spec.html#Discard"><span class="id" title="constructor">Discard</span></a> <span class="id" title="var">reason</span>) ⇒ ("Discard " <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <span class="id" title="method">show</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#reason"><span class="id" title="variable">reason</span></a>)%<span class="id" title="var">string</span> }.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Discard"><span class="id" title="section">Discard</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Commit"><span class="id" title="section">Commit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="commitE"><span class="id" title="inductive">commitE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a name="Commit"><span class="id" title="constructor">Commit</span></a> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#commitE"><span class="id" title="inductive">commitE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="commit"><span class="id" title="definition">commit</span></a> `{<a class="idref" href="DeepWeb.Free.Monad.Common.html#Convertible"><span class="id" title="class">Convertible</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#commitE"><span class="id" title="inductive">commitE</span></a> <span class="id" title="var">E</span>} : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Free.html#liftE"><span class="id" title="definition">liftE</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Common.html#convert"><span class="id" title="method">convert</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Commit"><span class="id" title="constructor">Commit</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Commit"><span class="id" title="section">Commit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="specE"><span class="id" title="definition">specE</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#commitE"><span class="id" title="inductive">commitE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#discardE"><span class="id" title="inductive">discardE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#traceE"><span class="id" title="inductive">traceE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#altE"><span class="id" title="inductive">altE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#Basic.nondetE"><span class="id" title="inductive">nondetE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#failureE"><span class="id" title="inductive">failureE</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="PureSpec"><span class="id" title="definition">PureSpec</span></a> := <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#specE"><span class="id" title="definition">specE</span></a>.<br/>

<br/>
</div>

<div class="doc">
This function zips a program and a test,
    given a function that tells
    us what to do when observable events occur. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="zipM"><span class="id" title="section">zipM</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="zipM.E"><span class="id" title="variable">E</span></a> <a name="zipM.CE"><span class="id" title="variable">CE</span></a> <a name="zipM.F"><span class="id" title="variable">F</span></a> : <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="zipM.zipE"><span class="id" title="variable">zipE</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">X</span> <span class="id" title="var">Y</span>}, <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.E"><span class="id" title="variable">E</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.CE"><span class="id" title="variable">CE</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Y"><span class="id" title="variable">Y</span></a>).<br/>

<br/>
<span class="id" title="keyword">CoFixpoint</span> <a name="zipM"><span class="id" title="definition">zipM</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.F"><span class="id" title="variable">F</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.E"><span class="id" title="variable">E</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.F"><span class="id" title="variable">F</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#a713615ae89f5e79b81b3a5662d0793f"><span class="id" title="notation">+'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.CE"><span class="id" title="variable">CE</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="DeepWeb.Free.Monad.Free.html#M"><span class="id" title="inductive">M</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.F"><span class="id" title="variable">F</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#3dcaec3b772747610227247939f96b01"><span class="id" title="notation">+</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#B"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#p"><span class="id" title="variable">p</span></a>, <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <span class="id" title="var">e</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> <span class="id" title="var">pk</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <span class="id" title="var">ce</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span> <a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM.zipE"><span class="id" title="variable">zipE</span></a> <span class="id" title="var">e</span> <span class="id" title="var">ce</span><a class="idref" href="Custom.Monad.html#650755d8e17e459ba500e9885c94c24c"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="definition">zipM</span></a> (<span class="id" title="var">pk</span> <span class="id" title="var">x</span>) (<span class="id" title="var">tk</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">p'</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="definition">zipM</span></a> <span class="id" title="var">p'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#bc6eb885c46b11f88927f8f92a59fd37"><span class="id" title="notation">(</span></a> <span class="id" title="var">e</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#bc6eb885c46b11f88927f8f92a59fd37"><span class="id" title="notation">|)</span></a> <span class="id" title="var">pk</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="definition">zipM</span></a> (<span class="id" title="var">pk</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">a</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">t'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="definition">zipM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">t'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#bc6eb885c46b11f88927f8f92a59fd37"><span class="id" title="notation">(</span></a> <span class="id" title="var">e</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#bc6eb885c46b11f88927f8f92a59fd37"><span class="id" title="notation">|)</span></a> <span class="id" title="var">tk</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">e</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="definition">zipM</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#p"><span class="id" title="variable">p</span></a> (<span class="id" title="var">tk</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">b</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="section">zipM</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#zipM"><span class="id" title="definition">zipM</span></a> {<span class="id" title="var">E</span> <span class="id" title="var">CE</span> <span class="id" title="var">F</span>} <span class="id" title="var">zipE</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}.<br/>

<br/>
<span class="id" title="keyword">CoInductive</span> <a name="valid_spec"><span class="id" title="inductive">valid_spec</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span>, <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="vt_tau"><span class="id" title="constructor">vt_tau</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a>)<br/>
| <a name="vt_trace"><span class="id" title="constructor">vt_trace</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">msg</span> <span class="id" title="var">tk</span>, @<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Common.html#convert"><span class="id" title="method">convert</span></a> (@<a class="idref" href="DeepWeb.Free.Monad.Common.html#Trace"><span class="id" title="constructor">Trace</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#msg"><span class="id" title="variable">msg</span></a>)) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a>)<br/>
| <a name="vt_arb"><span class="id" title="constructor">vt_arb</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>} `{<span class="id" title="class">Show</span> <span class="id" title="var">X</span>} `{<span class="id" title="class">Arbitrary</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>} <span class="id" title="var">tk</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<span class="id" title="var">v</span> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#X"><span class="id" title="variable">X</span></a>), <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#v"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb_"><span class="id" title="method">Arb_</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a>)<br/>
| <a name="vt_ret"><span class="id" title="constructor">vt_ret</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span>, @<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#x"><span class="id" title="variable">x</span></a>)<br/>
| <a name="or_both"><span class="id" title="constructor">or_both</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">tk</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, @<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#b"><span class="id" title="variable">b</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Common.html#convert"><span class="id" title="method">convert</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#Basic.Or"><span class="id" title="constructor">Or</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a>)<br/>
| <a name="alt_l"><span class="id" title="constructor">alt_l</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">tk</span>, @<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt_"><span class="id" title="method">Alt_</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a>)<br/>
| <a name="alt_r"><span class="id" title="constructor">alt_r</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">tk</span>, @<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt_"><span class="id" title="method">Alt_</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a>).<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Do&nbsp;we&nbsp;need&nbsp;c?&nbsp;&nbsp;(It&nbsp;counts&nbsp;foralls&nbsp;--&nbsp;it's&nbsp;here&nbsp;so&nbsp;that&nbsp;we&nbsp;can<br/>
&nbsp;&nbsp;&nbsp;shrink&nbsp;the&nbsp;number&nbsp;of&nbsp;foralls&nbsp;that&nbsp;are&nbsp;considered,&nbsp;leading&nbsp;to&nbsp;short<br/>
&nbsp;&nbsp;&nbsp;traces.&nbsp;&nbsp;Not&nbsp;clear&nbsp;this&nbsp;is&nbsp;working&nbsp;well.&nbsp;&nbsp;We&nbsp;wondered&nbsp;if&nbsp;QuickChick<br/>
&nbsp;&nbsp;&nbsp;can&nbsp;be&nbsp;improved&nbsp;to&nbsp;shrink&nbsp;nested&nbsp;foralls&nbsp;alternately&nbsp;(as&nbsp;if&nbsp;they<br/>
&nbsp;&nbsp;&nbsp;were&nbsp;paired),&nbsp;but&nbsp;this&nbsp;is&nbsp;fairly&nbsp;difficult.)&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> {<span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="comment">(*&nbsp;Current&nbsp;depth&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fail_checker</span>: <span class="id" title="definition">Checker</span>) <span class="comment">(*&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">t</span>: <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">t'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker"><span class="id" title="variable">fail_checker</span></a> <span class="id" title="var">t'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Arb&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#f8152a0e07849129c95c05cd0119e0c5"><span class="id" title="notation">(|</span></a> <span class="id" title="var">arb'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#f8152a0e07849129c95c05cd0119e0c5"><span class="id" title="notation">|||)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">arb'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb"><span class="id" title="constructor">Arb</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 ⇒ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">c'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrinkShow</span> <span class="id" title="method">arbitrary</span> <span class="id" title="method">shrink</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ (<span class="id" title="method">show</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> ": " <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <span class="id" title="method">show</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#a"><span class="id" title="variable">a</span></a>)%<span class="id" title="var">string</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker"><span class="id" title="variable">fail_checker</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#v"><span class="id" title="variable">v</span></a>) <span class="id" title="var">c'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Or&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">(|</span></a> <span class="id" title="var">or'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">|)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">or'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#Basic.nondetE"><span class="id" title="inductive">nondetE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#Basic.Or"><span class="id" title="constructor">Or</span></a> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAll</span> <span class="id" title="method">arbitrary</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker"><span class="id" title="variable">fail_checker</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#b"><span class="id" title="variable">b</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Alt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#c2b9feb8cba746420b4861f4eceada3f"><span class="id" title="notation">(|</span></a> <span class="id" title="var">alt'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#c2b9feb8cba746420b4861f4eceada3f"><span class="id" title="notation">||)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">alt'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#altE"><span class="id" title="inductive">altE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt"><span class="id" title="constructor">Alt</span></a> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fail_checker'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker"><span class="id" title="variable">fail_checker</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker'"><span class="id" title="variable">fail_checker'</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Trace&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#ae15d0da6188dc05be5f60b9faa0c9cf"><span class="id" title="notation">(|</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#ae15d0da6188dc05be5f60b9faa0c9cf"><span class="id" title="notation">||||)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">trace'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#traceE"><span class="id" title="inductive">traceE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#Trace"><span class="id" title="constructor">Trace</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">msg</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> (<span class="id" title="method">show</span> <span class="id" title="var">msg</span>) (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker"><span class="id" title="variable">fail_checker</span></a> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Discard&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#290641e400074b4a6865e523cadfe377"><span class="id" title="notation">(|</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Discard"><span class="id" title="constructor">Discard</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#290641e400074b4a6865e523cadfe377"><span class="id" title="notation">|||||)</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Commit&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#23112832469575d4fbc3697aa3a7461b"><span class="id" title="notation">(</span></a> <span class="id" title="var">commit</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#23112832469575d4fbc3697aa3a7461b"><span class="id" title="notation">||||||)</span></a> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">commit</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#commitE"><span class="id" title="inductive">commitE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Commit"><span class="id" title="constructor">Commit</span></a> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <span class="id" title="var">n'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#d"><span class="id" title="variable">d</span></a> (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Fail&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#Fail"><span class="id" title="constructor">Fail</span></a> <span class="id" title="var">r</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> ("Fail " <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <span class="id" title="method">show</span> <span class="id" title="var">r</span>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fail_checker"><span class="id" title="variable">fail_checker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="check_spec"><span class="id" title="definition">check_spec</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">n</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">c</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec_aux"><span class="id" title="definition">check_spec_aux</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#n"><span class="id" title="variable">n</span></a> 0 (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="check_spec'"><span class="id" title="definition">check_spec'</span></a> (<span class="id" title="var">n</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">t</span>: <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">skip</span> : <span class="id" title="definition">Checker</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">fi</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="definition">Checker</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">btd</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="comment">(*&nbsp;backtrack&nbsp;depth&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">dec</span> (<span class="id" title="var">fi</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="definition">Checker</span>) <span class="id" title="var">n</span> : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> ⇒ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <span class="id" title="var">n'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <span class="id" title="definition">whenFail</span> "FUEL OUT" (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Tau"><span class="id" title="constructor">Tau</span></a> <span class="id" title="var">t'</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> <span class="id" title="var">t'</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#skip"><span class="id" title="variable">skip</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Arb&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#f8152a0e07849129c95c05cd0119e0c5"><span class="id" title="notation">(|</span></a> <span class="id" title="var">arb'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#f8152a0e07849129c95c05cd0119e0c5"><span class="id" title="notation">|||)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">arb'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#arbitraryE"><span class="id" title="inductive">arbitraryE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Arb"><span class="id" title="constructor">Arb</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 ⇒ <span class="id" title="definition">whenFail</span> "ARB" (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">c'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> <span class="id" title="method">arbitrary</span> <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#v"><span class="id" title="variable">v</span></a>) (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <span class="id" title="var">c'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Or&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">(|</span></a> <span class="id" title="var">or'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#3ab127f18f4257031e08250eaa1f4b32"><span class="id" title="notation">|)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">or'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#Basic.nondetE"><span class="id" title="inductive">nondetE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#Basic.Or"><span class="id" title="constructor">Or</span></a> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">skip'</span> <span class="id" title="var">b</span> := <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#b"><span class="id" title="variable">b</span></a>)) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#skip"><span class="id" title="variable">skip</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Free.Monad.Spec.html#dec"><span class="id" title="variable">dec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAll</span> <span class="id" title="method">arbitrary</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#b"><span class="id" title="variable">b</span></a>) (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#skip'"><span class="id" title="variable">skip'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#b"><span class="id" title="variable">b</span></a>) (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#dec"><span class="id" title="variable">dec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Alt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#c2b9feb8cba746420b4861f4eceada3f"><span class="id" title="notation">(|</span></a> <span class="id" title="var">alt'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#c2b9feb8cba746420b4861f4eceada3f"><span class="id" title="notation">||)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">alt'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#altE"><span class="id" title="inductive">altE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Alt"><span class="id" title="constructor">Alt</span></a> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fi'</span> <span class="id" title="var">_</span> := <span class="id" title="definition">whenFail</span> "Retry"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> "Save"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi'"><span class="id" title="variable">fi'</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Trace&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#ae15d0da6188dc05be5f60b9faa0c9cf"><span class="id" title="notation">(|</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#ae15d0da6188dc05be5f60b9faa0c9cf"><span class="id" title="notation">||||)</span></a> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">trace'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#traceE"><span class="id" title="inductive">traceE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Common.html#Trace"><span class="id" title="constructor">Trace</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">msg</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">tk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> (<span class="id" title="method">show</span> <span class="id" title="var">msg</span>) (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#skip"><span class="id" title="variable">skip</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">tk</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Discard&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#290641e400074b4a6865e523cadfe377"><span class="id" title="notation">(|</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Discard"><span class="id" title="constructor">Discard</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#290641e400074b4a6865e523cadfe377"><span class="id" title="notation">|||||)</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Commit&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#23112832469575d4fbc3697aa3a7461b"><span class="id" title="notation">(</span></a> <span class="id" title="var">commit'</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#23112832469575d4fbc3697aa3a7461b"><span class="id" title="notation">||||||)</span></a> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">commit'</span> <span class="id" title="tactic">in</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#commitE"><span class="id" title="inductive">commitE</span></a> <span class="id" title="var">T</span> <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Spec.html#Commit"><span class="id" title="constructor">Commit</span></a> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec'"><span class="id" title="definition">check_spec'</span></a> <span class="id" title="var">n'</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="DeepWeb.Free.Monad.Spec.html#skip"><span class="id" title="variable">skip</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="var">k</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Fail&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Vis"><span class="id" title="constructor">Vis</span></a> <span class="id" title="var">_</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">(|</span></a> <a class="idref" href="DeepWeb.Free.Monad.Common.html#Fail"><span class="id" title="constructor">Fail</span></a> <span class="id" title="var">r</span> <a class="idref" href="DeepWeb.Free.Monad.Common.html#0e0a4dca525f93499ca75408b58ed5f7"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> ("Fail " <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <span class="id" title="method">show</span> <span class="id" title="var">r</span>) (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#fi"><span class="id" title="variable">fi</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#btd"><span class="id" title="variable">btd</span></a>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Return&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="DeepWeb.Free.Monad.Free.html#Ret"><span class="id" title="constructor">Ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> ⇒ <span class="id" title="definition">whenFail</span> "RETURN" <a class="idref" href="DeepWeb.Free.Monad.Spec.html#skip"><span class="id" title="variable">skip</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;These&nbsp;are&nbsp;already&nbsp;in&nbsp;QC&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a name="semChecker_checker_true"><span class="id" title="lemma">semChecker_checker_true</span></a> : <span class="id" title="definition">semChecker</span> (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">semReturnGen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">semCheckableQProp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="semChecker_checker_false"><span class="id" title="lemma">semChecker_checker_false</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <span class="id" title="definition">semChecker</span> (<span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">semReturnGen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">semCheckableQProp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="correctness"><span class="id" title="section">correctness</span></a>.<br/>
</div>

<div class="doc">
This lemma looks nice. But it might not be one that can be proven,
   because of constructivity of coq? 
</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a name="semChecker_disjoin"><span class="id" title="axiom">semChecker_disjoin</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span>, <span class="id" title="definition">semChecker</span> (<span class="id" title="definition">disjoin</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">[</span></a><a class="idref" href="DeepWeb.Free.Monad.Spec.html#c1"><span class="id" title="variable">c1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">;</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c2"><span class="id" title="variable">c2</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Lists.List.html#f83abbde7679bdbfec6afddd39d41e15"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <span class="id" title="definition">semChecker</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c1"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#7a45dffb109c3069e5c675be68643e60"><span class="id" title="notation">∨</span></a> <span class="id" title="definition">semChecker</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#c2"><span class="id" title="variable">c2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="checker_correct"><span class="id" title="lemma">checker_correct</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="definition">semChecker</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec"><span class="id" title="definition">check_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#semChecker_checker_true"><span class="id" title="lemma">semChecker_checker_true</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>;<br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;(match&nbsp;goal&nbsp;with&nbsp;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">e</span>:</span> <span class="inlinecode"><span class="id" title="var">SpecE</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"></span>&nbsp;=&gt;&nbsp;destruct&nbsp;e;&nbsp;<span class="inlinecode"><span class="id" title="tactic">idtac</span>|<span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">l</span>|..</span>&nbsp;end);&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#semChecker_checker_true"><span class="id" title="lemma">semChecker_checker_true</span></a>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intuition</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span> <span class="id" title="var">verify_tau_l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H</span>;  <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">semWhenFail_id</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#semChecker_disjoin"><span class="id" title="axiom">semChecker_disjoin</span></a>; (<span class="id" title="tactic">left</span> + <span class="id" title="tactic">right</span>); <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>].<br/>
<span class="id" title="keyword">Abort</span>.<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Fix&nbsp;the&nbsp;proof&nbsp;--&nbsp;Trace&nbsp;broke&nbsp;it?&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
We can almost show completeness, as shown in the following lemma!

<div class="paragraph"> </div>

    The only problem is that when the test calls <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Common.html#NonDeterminismBis.or"><span class="id" title="definition">or</span></a></span>, we need to know
    whether to use <span class="inlinecode"><span class="id" title="var">or_l</span></span> or <span class="inlinecode"><span class="id" title="var">or_r</span></span>. But I doubt that is possible,
    because it is undecidable how much fuel we have to pass to
    <span class="inlinecode"><a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec"><span class="id" title="definition">check_spec</span></a></span> to decide which branch to take. Bummer.  (For
    technical reasons this shows up twice, hence the two <span class="inlinecode"><span class="id" title="var">admit</span></span>
    below. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">absurd</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">v</span> : <a class="idref" href="DeepWeb.Free.Monad.Free.html#void"><span class="id" title="inductive">void</span></a> |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">v</span> : <a class="idref" href="DeepWeb.Free.Monad.Common.html#emptyE"><span class="id" title="inductive">emptyE</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="checker_complete"><span class="id" title="lemma">checker_complete</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> (<span class="id" title="var">t</span> : <a class="idref" href="DeepWeb.Free.Monad.Spec.html#PureSpec"><span class="id" title="definition">PureSpec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>, <span class="id" title="definition">semChecker</span> (<a class="idref" href="DeepWeb.Free.Monad.Spec.html#check_spec"><span class="id" title="definition">check_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#l"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#valid_spec"><span class="id" title="inductive">valid_spec</span></a> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#t"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">self</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> 2 0); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">absurd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;constructor;&nbsp;intro.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;checker_complete;&nbsp;intros.&nbsp;*)</span><br/>
<span class="id" title="keyword">Abort</span>.<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(H&nbsp;(S&nbsp;n)&nbsp;(v::l)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;admit.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;specialize&nbsp;(H&nbsp;2&nbsp;<span class="inlinecode"></span>);&nbsp;contradict&nbsp;H;&nbsp;apply&nbsp;semChecker_checker_false<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;constructor;&nbsp;apply&nbsp;checker_complete;&nbsp;intros;&nbsp;apply&nbsp;(H&nbsp;(S&nbsp;n)&nbsp;l).<br/>
Abort.&nbsp;*)</span><br/>
<span class="id" title="keyword">End</span> <a class="idref" href="DeepWeb.Free.Monad.Spec.html#correctness"><span class="id" title="section">correctness</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>